
<div class="custom-note-form">
  <div class="note-and-tag">
    <div class="create-note">
  <h2>Create New Note</h2>
  <form (submit)="createNote()">
    <label>Title:</label>
    <input type="text" [(ngModel)]="newNote.title" name="title" required><br><br>
    <label>content:</label>
    <textarea [(ngModel)]="newNote.content" name="content" required></textarea><br><br>
    <button type="submit">Create Note</button>
  </form>
</div>
  </div>
<hr>

<div *ngIf="notes.length > 0">
  <h2>Existing Notes</h2>
  <ul>
    <li *ngFor="let note of notes">
      <div *ngIf="editingNoteId !== note.id; else editMode">
        <strong>{{ note.title }}</strong> - {{ note.content }}
        <p>Tags:
          <span *ngFor="let tag of note.tags">{{ tag.name }}</span>
        </p>
        <button (click)="startEditing(note.id)">Edit</button>
        <button (click)="deleteNote(note.id)">Delete</button>
      </div>
      <ng-template #editMode>
        <form (submit)="updateNote(note.id, updatedNote)">
          <label for="editTitle">Title:</label>
          <input type="text" id="editTitle" [(ngModel)]="updatedNote.title" name="title" required>

          <label for="editContent">Content:</label>
          <textarea id="editContent" [(ngModel)]="updatedNote.content" name="content" required></textarea>

          <div class="tag-section">
            <h3>Available Tags</h3>
            <select [(ngModel)]="selectedTagId" [ngModelOptions]="{ standalone: true }">
              <option *ngFor="let tag of availableTags" [value]="tag.id">{{ tag.name }}</option>
            </select>
            <button type="button" (click)="assignTag(selectedTagId)">Assign Tag</button>
            <button type="button" (click)="unassignTag(selectedTagId)">Unassign Tag</button>
          </div>

          <div class="button-group">
            <button type="submit">Save</button>
            <button type="button" (click)="cancelEditing()">Cancel</button>
          </div>
        </form>
      </ng-template>
    </li>
  </ul>
</div>

<div *ngIf="notes.length === 0">
  <p>No notes available.</p>
</div>

</div>
